var Sequelize = require('sequelize');

/////////////////////////////////////////////////////////////////////////////////////////////////////////
// Model definitions ///////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////

var User = {
  user_name: Sequelize.STRING
};

var Room = {
  room_name: Sequelize.STRING
};

var Game = {
  state: Sequelize.ENUM('INPROG', 'COMPLETE'),
  winner: Sequelize.INTEGER
  // round_1: 
};

/////////////////////////////////////////////////////////////////////////////////////////////////////////
// Private methods /////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////

function _define(connection, modelName, model) {
  try {
    connection.define(modelName, model);  
  } catch (ex) {
    console.error(ex);
  }
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////
// Public methods //////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////

function _defineAll(connection) {
  
  if (connection && connection.define) {
    _define(connection, 'user', User);
    _define(connection, 'room', Room);
    _define(connection, 'game', Game);
  } else {
    console.error('A valid Sequelize connection is required.');
  }
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////
// Export //////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////

module.exports = {
  defineAllModels: _defineAll
}